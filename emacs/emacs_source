
#Скачивание дистрибутива и проверка подписи и целостности. Для gpg очень важно под каким 
#пользователем его запускаешь и импортируешь keyring

sudo apt-get update

#если решено скачать исходники через репозиторий debian или ubuntu 
#необходимо подправить файл ubuntu.sources, а именно добавить deb-src в Types: deb

#для ubuntu
sudo nano /etc/apt/sources.list.d/ubuntu.sources
#для puppy
nano /etc/apt/sources.list



#Но обычно через репозиторий качается не последняя версия, а стабильная.
#поэтому для последней версии качаем с gnu.org
#apt-get build-dep emacs для puppy не работает . Так как он опирается на использование systemd
#чего нету в puppy

 
cd ~/Downloads
wget https://ftp.gnu.org/gnu/emacs/emacs-30.1.tar.xz
wget https://ftp.gnu.org/gnu/emacs/emacs-30.1.tar.xz.sig
wget https://ftp.gnu.org/gnu/gnu-keyring.gpg
gpg --import gnu-keyring.gpg
gpg --verify --keyring ./gnu-keyring.gpg emacs-30.1.tar.xz.sig 
gpg --verify emacs-30.1.tar.xz.sig


#качаем среду разработки для puppy , нужна так содержит gcc и так далее
wget https://distro.ibiblio.org/puppylinux/puppy-bookwormpup/BookwormPup64/10.0.11/devx_dpupbw64_10.0.11.sfs
#загружаем
cd ~/Downloads
sfs_load devx_dpupbw64_10.0.11.sfs

# apt install build-essential не стоит ставить , так как devx_dpupbw64_10.0.11.sfs перекрывает





#Распаковка и конфигурация

tar xf emacs-30.1.tar.xf
cd emacs-30.1
mkdir build
cd build
../configure --with-pgtkk --with-mailutils


#Сборка и установка

make -j$(nproc)
sudo make install

#Проверка 

emacs --version
